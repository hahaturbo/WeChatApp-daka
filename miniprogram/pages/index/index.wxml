<!--index.wxml-->
<view class="container">
	<view class="auth {{$state.isLogin ? 'displayNone' : ''}}">
		<!-- <view class="auth "> -->

		<h1>{{error_code}}</h1>
		<button open-type='getUserInfo' bindgetuserinfo='checkPermission' id='bn_login'>使用微信登录</button>
		<!-- <text>{{ConsoleText}}</text> -->
	</view>
	<image class='background' src="../../images/background.png" mode="aspectFill">
	</image>
	<mp-dialog title="{{dialogTitle}}" show="{{dialogShow}}" bindbuttontap="tapDialogButton" buttons="{{dialogsButton}}">
		<!-- <view>{{dialogTitle}}</view> -->
	</mp-dialog>
	<view class='down'>
		<!-- <image class='downmainimg' src="../../images/down.png" mode="aspectFill"></image> -->
		<view class="downleft">
			<image class='downimg {{nowPage!=0 ? "displayNone" : ""}}' src="../../images/aim3.png" data-to="3" bindtap="changePage"></image>
			<image class='downimg {{nowPage!=1 ? "displayNone" : ""}}' src="../../images/back.png" data-to="0" bindtap="changePage_Back"></image>
			<image class='downimg {{nowPage!=2&&nowPage!=3 ? "displayNone" : ""}}' src="../../images/tick.png" data-to="0" bindtap="changePage"></image>

		</view>
		<view class='downmidshadow '></view>
		<view class='downmidbg '></view>
		<view class='downmid {{nowPage==1||nowPage==3 ? "downmiddisable" : ""}}'>
			<image class='downmidimg {{nowPage!=0&&nowPage!=1 ? "displayNone" : ""}}' src="../../images/newaim3.png" data-to="1" bindtap="changePage"></image>
			<!-- <image class='downmidimg {{nowPage!=1 ? "displayNone" : ""}}' src="../../images/newaim3.png" data-to="1" bindtap="changePage"></image> -->
			<image class='downmidimg {{nowPage!=2 ? "displayNone" : ""}}' src="../../images/setting3.png" data-to="0" bindtap="changePage"></image>
			<image class='downmidimg {{nowPage!=3 ? "displayNone" : ""}}' src="../../images/aim3.png" data-to="0" bindtap=""></image>

		</view>

		<view class="downright">
			<image class='downimg {{nowPage!=0&&nowPage!=3 ? "displayNone" : ""}}' src="../../images/setting3.png" data-to="2" bindtap="changePage"></image>

			<image class='downimg {{nowPage!=1 ? "displayNone" : ""}}' src="../../images/finish.png" data-to="0" bindtap="changePage_Finish"></image>

			<image class='downimg {{nowPage!=2 ? "displayNone" : ""}}' src="../../images/aim3.png" data-to="0" bindtap="changePage"></image>


		</view>
	</view>
	<!-- nowPage 默认等于 0 ， 但是你按下 新建打卡 就会变成1 ， 这里判断 如果不等于0了 就添加一个 toFullCard 的 类
         这个类里面 就有动画的样式
         这里的 changedPageCounts 就是为了判断是不是 首次进入首页，如果是第一次进入首页的话 就不会给他添加return2Home的类， 否则就会添加 
         nmd这里n个三元运算符
    -->

	<scroll-view scroll-y="true" class='AllMainCard {{nowPage== 0?"":"displayNone"}} '>
		<view class="LetAMCCenter">
			<view id="main_container" class='aim_card   {{nowPage != 0 ? "toFullCard" : (changedPageCounts != 0 ? "return2Home" : "")}}' animation="{{open_animation}}">
				<!-- <view id="main_container" class='aim_card  displayNone' animation="{{open_animation}}"> -->
				<!-- {{card_num<3 && nowPage== 0?"":"displayNone"}} -->
				<!-- 调试用 -->
				<!-- <view> -->

				<view class='home-content {{nowPage!=0 ? "displayNone" : ""}}' bindtap="">
					<image class='{{card_num==0?"":"displayNone"}}' style=" width:100%;height:100%" src="../../images/mainnew.png"></image>
					<!-- <text>isLogin:{{ConsoleText}}</text> -->

					<view class='home-content '>
						<text>{{$state.aimCardDatas[0].goal_name}}</text>
						<image class='' style=" width:70%;height:40%" src="../../images/mainnew2.png"></image>
						<text style='color:#FF9966; font-size:30rpx;'>已连续{{$state.aimCardDatas[0].constantly
}}次</text>
						<button class='new_aim_card {{$state.aimCardDatas[0].canBeSignedNow==1?"":"NACunable"}}' bindtap='{{$state.aimCardDatas[0].canBeSignedNow==1?"sign_btn":""}}'><text class=' {{$state.aimCardDatas[0].canBeSignedNow==1?"":"displayNone"}}'>今日打卡</text>
						<image class='{{$state.aimCardDatas[0].canBeSignedNow==-118?"":"displayNone"}}' src='../../images/tickB_finish.png' style="width:100%; height:90rpx"></image>
						
						</button>
					</view>
				</view>
			</view>
		</view>

		<view class="LetAMCCenter" wx:for='{{$state.aimCardDatas}}'>
			<view class='mid-contentA  {{index%3==0?".bgcolor-g":""}} {{index%3==1?".bgcolor-b":""}} {{index%3==2?".bgcolor-p":""}} {{$state.aimCardDatas[index+1]?"":"displayNone"}} '>
			<view class='contentAText'>
			<text class="mid-text">{{$state.aimCardDatas[index+1].goal_name}}</text>
			<text class='small-text'>已连续{{$state.aimCardDatas[index+1].constantly
}}次</text>						
			</view>
			<view class='button {{$state.aimCardDatas[index+1].canBeSignedNow==1?"":"buttonNo"}}' data-id='{{$state.aimCardDatas[index+1].goal_id}}' bindtap='{{$state.aimCardDatas[index+1].canBeSignedNow==1?"sign_btn":""}}' >
		<image class='icon {{$state.aimCardDatas[index+1].canBeSignedNow==-118?"":"displayNone"}}' src="../../images/tick_finish.png" ></image>
				<image class='icon {{((($state.aimCardDatas[index+1].canBeSignedNow==1)&&($state.aimCardDatas[index+1].frequency_type[0]==0))||($state.aimCardDatas[index+1].frequency_type==""))?"":"displayNone"}}' src="../../images/tick_able.png" ></image>
						<image class='icon {{($state.aimCardDatas[index+1].canBeSignedNow==1)&&($state.aimCardDatas[index+1].frequency_type[0]==1)?"":"displayNone"}}' src="../../images/tick_today.png" ></image>
		<!-- <image class='icon' src="../../images/tick_able.png"></image> -->
			</view>			
			</view>
		<!-- </view>
			<view class="LetAMCCenter"> -->


		</view>
		<!-- LetAMCCenter_END -->
		


	</scroll-view>

	<!-- class='AllMainCard'end -->

	<view class='FullScreenCard aim_card {{nowPage != 0 ? "toFullCard" : (changedPageCounts != 0 ? "return2Home" : "")}} {{nowPage==1||nowPage==2 ? "" : "displayNone"}}'>
		<!-- animation="{{open_animation}}" -->
		<!-- <view class=' containerB {{nowPage==1 ? "displayBlock" : "displayNone"}}'> -->
		<!-- <view class=' containerB {{wx:if="{{view == 'WEBVIEW'}}" ? "" : "displayNone"}}'> -->
		<view class=' containerB toFullCard' wx:if="{{nowPage==1}}">
			<newaimcard></newaimcard>
			<!-- </view> -->
		</view>
		<!-- nowpage 1 end -->
		<view class=' containerB {{nowPage==2 ? "" : "displayNone"}} toFullCard'>
			<setting></setting>
		</view>
	</view>
	<!-- nowpage3 start -->
	<view class='{{nowPage==3 ? "toGoalCard" : "displayNone"}}'>
		<image id="clicp" src="../../images/clicp.png"></image>
		<view class='containerC '>
			<tick></tick>
		</view>
	</view>

	<!-- <view>456</view> -->


</view>